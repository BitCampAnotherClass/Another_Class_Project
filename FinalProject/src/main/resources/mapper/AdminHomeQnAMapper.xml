<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  <mapper namespace="com.anotherclass.bitcamp.dao.admin.AdminHomeQnADAO">
  	<select id="totalRecordCount" resultType="int" >
		select count(user_qna_no)
		from homeQnaUser 
		where delete_sort <![CDATA[=]]> 0       
		and  view_grade   <![CDATA[=]]> 1 
		<if test="searchWord !=null">
           and #{searchKey} LIKE '%'||#{searchWord}||'%'  
        </if>
		
	</select>
	
	<select id="boardPageSelect" resultType="com.anotherclass.bitcamp.service.vo.admin.AdminHomeQnAVO" >
		select * from  
			(select * from  
				(select user_qna_no, member_id, title, to_char(writedate, 'yyyy-MM-DD') writedate, board_no1 ,board_no2, count(board_no1)over(partition by board_no1) as replycount   
				from homeQnaUser 
				where delete_sort <![CDATA[=]]> 0       
				and  view_grade   <![CDATA[=]]> 1 
				<if test="searchWord !=null">
				and #{searchKey} LIKE '%'||#{searchWord}||'%'
				</if>               
				order by user_qna_no desc)
			where rownum<![CDATA[<=]]>#{nowPage}*#{pageRecord} order by user_qna_no asc)
		where rownum<![CDATA[<=]]>#{pageRecord} order by user_qna_no desc 	
	</select>
  
  
  
  </mapper>